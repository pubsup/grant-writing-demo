from typing import Dict, Any, List
import time

files_database = [
    {
        "id": "default-grant-doc",
        "original_name": "sample_grant.pdf",
        "stored_name": "default-grant-doc.pdf",
        "content_type": "application/pdf",
        "doc_role": "grant",
        "upload_timestamp": time.time(),
        "grant_id": "1",
    },
    {
        "id": "budget-template",
        "original_name": "budget_template.pdf",
        "stored_name": "budget-template.pdf",
        "content_type": "application/pdf",
        "doc_role": "template",
        "upload_timestamp": time.time(),
        "grant_id": "0",
    }
]

grants_database = [
    {
        "id": "1",
        "name": "Sample Grant",
        "department": "Sample Department",
        "county": "Sample County",
        "due_date": "2024-12-31",
        "questions": [{'question': 'Provide an overview of the proposed project and project activities included in the project budget.', 'sub_questions': ['What are the main goals and objectives of the proposed project?', 'What specific activities will be conducted to achieve these goals?', 'How do the described project activities align with and justify the proposed budget?', 'What is the overall timeline or sequence of these activities?']}, {'question': "Which industry clusters identified in your region's Economic Growth and Diversification Plan will this project focus on? Describe how the project supports the Plan's strategies and goals. What problem is the project team trying to solve?", 'sub_questions': ["Which specific industry clusters identified in your region's Economic Growth and Diversification Plan will this project target?", "How does the project align with and support the strategies and goals outlined in the region's Economic Growth and Diversification Plan?", 'What specific problem is the project team aiming to solve?']}, {'question': 'Identify the outcomes and deliverables the project will achieve during the two-year grant performance period. For any quantitative outcomes that demonstrate project impact, select the most relevant items from the GO Virginia Core Grant Outcomes (definitions provided) and explain why they are appropriate for your project. Describe how the project team or its partners will track and report on these outcomes over time.', 'sub_questions': ['What specific outcomes and deliverables will the project achieve during the two-year grant performance period?', 'For any quantitative outcomes that demonstrate project impact, which GO Virginia Core Grant Outcomes are most relevant, and why are they appropriate for your project?', 'How will the project team or its partners track the identified outcomes and deliverables over time?', 'How will the project team or its partners report on these outcomes and deliverables over time?']}, {'question': 'Describe how the Economic Impact template estimates were determined and the timeline for achieving the expected fiscal return. Include an explanation and source any data used as the basis for inputs used to complete the template. Please note that the template is used as an evaluation criterion but a positive fiscal return is not an eligibility requirement.', 'sub_questions': ['What methodologies were used to develop the economic impact estimates presented in the template?', 'What data sources were used as inputs for the economic impact template, and how were they justified?', 'What is the timeline for achieving the expected fiscal return?', 'What are the key assumptions underlying the estimated economic impacts?', 'How will progress toward achieving the expected fiscal return be monitored and measured?']}, {'question': "Identify the localities that are actively participating in the project and describe each locality's role. Participation may include financial support, staff involvement, resource sharing, or other meaningful contributions. A minimum of two localities is required. Refer to the Regional Collaboration and Local Participation Guidelines for examples of eligible participation.", 'sub_questions': ['Which specific localities are actively participating in the project?', 'What is the precise role of each participating locality?', "What is the nature of each locality's participation (financial support, staff involvement, resource sharing, or other contributions)?", "How does each locality's participation contribute meaningfully to the project's goals?"]}, {'question': 'Discuss how the Regional Council and project development team consulted with localities regarding the strategy and implementation of the project.', 'sub_questions': ['What specific consultation methods were used by the Regional Council and project development team to engage with localities?', 'Which localities were consulted during the strategy and implementation phases of the project?', 'What feedback was received from the localities during these consultations?', "How was the feedback from localities incorporated into the project's strategy and implementation?"]}, {'question': "Describe how private industry and subject matter experts have been involved in validating, developing, or planning this project. How has industry demand informed the project's purpose and design? Identify any traded-sector companies that have been engaged and explain their role or input.", 'sub_questions': ['How have private industry representatives and subject matter experts been involved in validating the project?', 'How have private industry representatives and subject matter experts been involved in developing the project?', 'How have private industry representatives and subject matter experts been involved in planning this project?', "How has industry demand informed the project's purpose?", "How has industry demand informed the project's design?", 'Which traded-sector companies have been engaged in the project?', 'What specific role(s) have the identified traded-sector companies played in the project?', 'What specific input have the identified traded-sector companies provided to the project?']}, {'question': 'Identify the applicant or fiscal agent and all partner organizations involved in implementing the project. For each partner, describe their role in carrying out the scope of work, their financial or in-kind match commitment, and their capacity to fulfill these responsibilities. Partners may include school divisions, community colleges, higher education institutions, economic and workforce entities, local governments, regional organizations, planning district commissions, and nonprofits.', 'sub_questions': ['Who is the applicant or fiscal agent?', 'Which partner organizations are involved in implementing the project?', "What is each partner's role in carrying out the scope of work?", "What is each partner's financial or in-kind match commitment to the project?", 'What is the demonstrated capacity of each partner to fulfill their responsibilities in the project?']}, {'question': 'Describe any existing programs with similar goals and explain how this project will complement—not duplicate—those efforts. In what ways does this proposal add value to ongoing work that supports economic diversification and the growth of traded-sector industries? Have past or current efforts been successful and sustainable? Describe any cost efficiencies identified through collaboration with project partners.', 'sub_questions': ['What existing programs have similar goals to this project?', 'How will this project complement, rather than duplicate, existing programs?', 'How does this proposal add value to ongoing work supporting economic diversification and traded-sector industries?', 'Have past or current efforts been successful and sustainable, and how do you know?', 'What cost efficiencies have you identified through collaboration with project partners?']}, {'question': 'Describe the project timeline and the specific project milestones and deliverables that will be utilized to track project progress and fund disbursement.', 'sub_questions': ['What is the proposed timeline for the project, including start and end dates for each phase or activity?', 'What are the specific, measurable, achievable, relevant, and time-bound (SMART) milestones for the project?', 'What are the key deliverables associated with each milestone?', 'How will these milestones and deliverables be used to monitor project progress?', 'How will these milestones and deliverables be linked to fund disbursement?']}, {'question': 'Describe the total project budget, including how GO Virginia funds will be used, how matching funds will be allocated, and the sources and uses of all matching funds. If applicable, identify any additional leveraged funds that are not eligible for GO Virginia match such as other state or federal resources—that help demonstrate the full scope of the project.', 'sub_questions': ['What is the total budget for the proposed project?', 'How will GO Virginia funds be specifically used within the project budget?', 'What are the sources and planned uses of all matching funds?', 'If applicable, what additional leveraged funds will support the project, even if ineligible for GO Virginia match?', 'How will matching and leveraged funds help demonstrate the full scope of the project?']}, {'question': 'Discuss any major barriers or risks that could affect the successful implementation of the project. What strategies will the project administrator use to address or overcome these challenges?', 'sub_questions': ["What are the major barriers or risks that could affect the project's successful implementation?", 'What specific strategies will be used to address or overcome each identified barrier or risk?', 'How will the project administrator monitor and adapt these strategies during the project period?']}, {'question': 'Describe any prerequisite activities undertaken by project partners to improve the efficiency of program delivery and support successful project launch. If the applicant or its partners have previously led GO Virginia-funded projects, summarize the outcomes of those efforts and explain how that experience strengthens this proposal.', 'sub_questions': ['What specific prerequisite activities have project partners undertaken?', 'How do these activities improve the efficiency of program delivery?', 'How do these activities support a successful project launch?', 'If applicable, what are the outcomes of any previous GO Virginia-funded projects led by the applicant or its partners?', 'If applicable, how does experience with previous GO Virginia-funded projects strengthen this proposal?']}, {'question': 'Discuss how the project will achieve stable, long-term sustainability beyond the initial GO Virginia funding period? Have any funding sources been secured to continue implementation once these funds are exhausted? If not, what is the plan to identify and secure future support?', 'sub_questions': ['What specific strategies will the project employ to ensure its long-term sustainability beyond the GO Virginia funding period?', 'What specific funding sources have already been secured to continue the project after the GO Virginia funding ends?', "If no funding sources have been secured, what is the detailed plan to identify and secure future funding for the project's continuation?", "What specific metrics or indicators will be used to measure the project's sustainability?", 'What are the potential challenges to achieving long-term sustainability, and what mitigation strategies will be implemented?']}] ,
        "status": "Researching"
    }

]

def add_to_grants_database(grant_entry: Dict[str, Any]) -> None:
    """Add grant entry to the in-memory database."""
    grants_database.append(grant_entry)
    return grants_database

def add_file_metadata(file_metadata: Dict[str, Any]) -> None:
    """Add file metadata to the in-memory database."""
    files_database.append(file_metadata)
    return files_database

def load_file_metadata() -> List[Dict[str, Any]]:
    """Load all file metadata from the in-memory database."""
    return files_database
